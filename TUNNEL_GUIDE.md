# Unseen Chat - Public Verification Guide

This guide explains how to verify the application using a public tunnel (ngrok or Cloudflare) to verify real-world connectivity, including cross-device and incognito usage.

## 1. Prepare the Application

We are using the **monolithic production build** for this test. The Express server will serve the React frontend.

1.  **Build Frontend** (I have already triggered this):
    ```bash
    cd client
    npm run build
    ```
    *Ensure `client/dist` exists.*

2.  **Start the Server**:
    In your terminal:
    ```bash
    cd server
    node index.js
    ```
    *Server should run on port 3001.*

## 2. Expose to Public Internet

Open a **separate** terminal window and run ONE of the following:

### Option A: Ngrok (Recommended)
```bash
ngrok http 3001
```

### Option B: Cloudflare Tunnel
```bash
cloudflared tunnel --url http://localhost:3001
```

## 3. The Verification Test

Copy the **HTTPS URL** generated by the tunnel (e.g., `https://a1b2-c3d4.ngrok-free.app`).

### Test 1: Normal + Incognito (Same Device)
1.  Open Chrome **Normal Tab** → Paste the Tunnel URL.
    -   *Status*: Should say "Searching..." or show landing page. Enter name "User A".
2.  Open Chrome **Incognito Tab** → Paste the Tunnel URL.
    -   *Status*: Enter name "User B".
3.  **Result**: Both should instantly change to **"Connected to a stranger"**.
4.  **Chat**: Send "Hello" from A. B should see it instantly.

### Test 2: Cross-Device (Optional but Best)
1.  Keep "User A" open on your Laptop.
2.  Send the Tunnel URL to your **Phone**.
3.  Open on Phone (turn off WiFi if you want to test truly external network).
4.  **Result**: Phone should match with Laptop.

## Troubleshooting

-   **"Session ID unknown"**: If this happens, my fix for `transports: ['websocket']` is working (it prevents falling back to polling which causes this on some tunnels).
-   **Blocked request**: Some corporate networks block tunnels. Use a personal network (Hotspot) if needed.
